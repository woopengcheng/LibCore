#include "Marshal/inc/CStream.h"
#include "UnitTest++/UnitTestPP.h"


TEST(CStream_SINT8)
{
	CUtil::CStream cs;
	SINT8 p1 = 0x00000000;
	SINT8 p2 = 0x0000000F;
	SINT8 p3 = 0x00000010;  
	SINT8 p4 = 0x0000007F; 
	SINT8 p5 = 0x00000080; 
	SINT8 p6 = 0x0000008F; 
	SINT8 p7 = 0x000000FF; 

	SINT8 q1 = 0;
	SINT8 q2 = 0;
	SINT8 q3 = 0;
	SINT8 q4 = 0; 
	SINT8 q5 = 0;
	SINT8 q6 = 0; 
	SINT8 q7 = 0; 
	cs << p1 << p2 << p3 << p4 << p5 << p6 << p7;
	cs >> q1 >> q2 >> q3 >> q4 >> q5 >> q6 >> q7;

	CHECK_EQUAL(p1 , q1); 
	CHECK_EQUAL(p2 , q2); 
	CHECK_EQUAL(p3 , q3);
	CHECK_EQUAL(p4 , q4);  
	CHECK_EQUAL(p5 , q5); 
	CHECK_EQUAL(p6 , q6); 
	CHECK_EQUAL(p7 , q7); 
} 

TEST(CStream_UINT8)
{
	CUtil::CStream cs;
	UINT8 p1 = 0x00000000;
	UINT8 p2 = 0x0000000F;
	UINT8 p3 = 0x00000010;
	UINT8 p4 = 0x0000007F; 
	UINT8 p5 = 0x00000080; 
	UINT8 p6 = 0x0000008F; 
	UINT8 p7 = 0x000000FF; 

	UINT8 q1 = 0;
	UINT8 q2 = 0;
	UINT8 q3 = 0;
	UINT8 q4 = 0; 
	UINT8 q5 = 0;
	UINT8 q6 = 0; 
	UINT8 q7 = 0; 
	cs << p1 << p2 << p3 << p4 << p5 << p6 << p7;
	cs >> q1 >> q2 >> q3 >> q4 >> q5 >> q6 >> q7;

	CHECK_EQUAL(p1 , q1); 
	CHECK_EQUAL(p2 , q2); 
	CHECK_EQUAL(p3 , q3);
	CHECK_EQUAL(p4 , q4);  
	CHECK_EQUAL(p5 , q5); 
	CHECK_EQUAL(p6 , q6); 
	CHECK_EQUAL(p7 , q7); 
} 

TEST(CStream_INT16)
{
	CUtil::CStream cs;
	INT16 p[] = { 0x00000000, 0x0000000F, 0x00000010,	0x000000FF,
		0x00000100,	0x00000FFF,	0x00001000,	0x00007FFF,
		0x00008000,	0x0000800F,	0x00008010,	0x000080FF,	
		0x00008100,	0x00008FFF,	0x0000FFFF };

	INT16 q[ARRAY_SIZE(p)];  
	for (UINT16 i = 0;i < ARRAY_SIZE(p);++i)
	{
		cs << p[i];
		cs >> q[i];

		CHECK_EQUAL(p[i] , q[i]); 
	}   
} 

TEST(CStream_UINT16)
{
	CUtil::CStream cs;
	UINT16 p[] = { 0x00000000, 0x0000000F, 0x00000010,	0x000000FF,
		0x00000100,	0x00000FFF,	0x00001000,	0x00007FFF,
		0x00008000,	0x0000800F,	0x00008010,	0x000080FF,	
		0x00008100,	0x00008FFF,	0x0000FFFF };

	UINT16 q[ARRAY_SIZE(p)];  
	for (UINT16 i = 0;i < ARRAY_SIZE(p);++i)
	{
		cs << p[i];
		cs >> q[i];

		CHECK_EQUAL(p[i] , q[i]); 
	}   
} 

TEST(CStream_INT32)
{
	CUtil::CStream cs;
	INT32 p[] = { 0x00000000, 0x0000000F, 0x00000010, 0x000000FF,
		0x00000100,	0x00000FFF,	0x00001000,	0x0000FFFFF,
		0x00010000,	0x00FFFFFF,	0x00100000,	0x0FFFFFFF,	
		0x10000000,	0x7FFFFFFF,	0xFFFFFFFF,	0x80000001,	
		0x8000000F,	0x80000010,	0x800000FF,	0x80000100,	
		0x80000FFF,	0x80001000,	0x800FFFFF,	0x80100000,
		0x80FFFFFF,	0x81000000,	0x8FFFFFFF,	0xFFFFFFFF};

	INT32 q[ARRAY_SIZE(p)] = {0};  

	for (INT32 i = 0;i < ARRAY_SIZE(p);++i)
	{
		cs << p[i];
		cs >> q[i];

		CHECK_EQUAL(p[i] , q[i]); 
	}   
}  

TEST(CStream_UINT32)
{
	CUtil::CStream cs;
	UINT32 p[] = { 0x00000000, 0x0000000F, 0x00000010, 0x000000FF,
		0x00000100,	0x00000FFF,	0x00001000,	0x0000FFFFF,
		0x00010000,	0x00FFFFFF,	0x00100000,	0x0FFFFFFF,	
		0x10000000,	0x7FFFFFFF,	0xFFFFFFFF,	0x80000001,	
		0x8000000F,	0x80000010,	0x800000FF,	0x80000100,	
		0x80000FFF,	0x80001000,	0x800FFFFF,	0x80100000,
		0x80FFFFFF,	0x81000000,	0x8FFFFFFF,	0xFFFFFFFF};

	UINT32 q[ARRAY_SIZE(p)] = {0};  

	for (INT32 i = 0;i < ARRAY_SIZE(p);++i)
	{
		cs << p[i];
		cs >> q[i];

		CHECK_EQUAL(p[i] , q[i]); 
	}   
} 

TEST(CStream_INT64)
{
	CUtil::CStream cs;
	INT64 p[] = { 0x0000000000000000 , 0x000000000000000F, 0x0000000000000010,	0x00000000000000FF,
	0x0000000000000100,	0x0000000000000FFF,	0x0000000000001000,	0x000000000000FFFFF,0x0000000000010000,
	0x0000000000FFFFFF,	0x0000000000100000,	0x000000000FFFFFFF,	0x0000000010000000,	0x00000000FFFFFFFF,
	0x0000000100000000, 0x0000000FFFFFFFFF, 0x0000001000000000,	0x000000FFFFFFFFFF,	0x0000010000000000,
	0x00000FFFFFFFFFFF,	0x0000100000000000,	0x0000FFFFFFFFFFFF,	0x0001000000000000,	0x000FFFFFFFFFFFFF,
	0x0010000000000000,	0x00FFFFFFFFFFFFFF,	0x0100000000000000,	0x0FFFFFFFFFFFFFFF,	0x1000000000000000,
	0x7FFFFFFFFFFFFFFF, 0x8000000000000001,	0x800000000000000F,	0x8000000000000010,	0x80000000000000FF,
	0x8000000000000100,	0x8000000000000FFF,	0x8000000000001000,	0x80000000000FFFFF,	0x8000000000100000,
	0x8000000000FFFFFF,	0x8000000001000000,	0x800000000FFFFFFF,	0x8000000010000000, 0x80000000FFFFFFFF,
	0x8000001000000000,	0x800000FFFFFFFFFF,	0x8000010000000000,	0x80000FFFFFFFFFFF,	0x8000100000000000,
	0x8000FFFFFFFFFFFF,	0x8001000000000000,	0x800FFFFFFFFFFFFF,	0x8010000000000000,	0x80FFFFFFFFFFFFFF,
	0x8100000000000000,	0x8FFFFFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF };

	INT64 q[ARRAY_SIZE(p)] = { 0 };

	for (INT32 i = 0;i < ARRAY_SIZE(p);++i)
	{
		cs << p[i];
		cs >> q[i];

		CHECK_EQUAL(p[i] , q[i]); 
	}  
} 

TEST(CStream_UINT64)
{
	CUtil::CStream cs;
	UINT64 p[] = { 0x0000000000000000 , 0x000000000000000F, 0x0000000000000010,	0x00000000000000FF,
		0x0000000000000100,	0x0000000000000FFF,	0x0000000000001000,	0x000000000000FFFFF,0x0000000000010000,
		0x0000000000FFFFFF,	0x0000000000100000,	0x000000000FFFFFFF,	0x0000000010000000,	0x00000000FFFFFFFF,
		0x0000000100000000, 0x0000000FFFFFFFFF, 0x0000001000000000,	0x000000FFFFFFFFFF,	0x0000010000000000,
		0x00000FFFFFFFFFFF,	0x0000100000000000,	0x0000FFFFFFFFFFFF,	0x0001000000000000,	0x000FFFFFFFFFFFFF,
		0x0010000000000000,	0x00FFFFFFFFFFFFFF,	0x0100000000000000,	0x0FFFFFFFFFFFFFFF,	0x1000000000000000,
		0x7FFFFFFFFFFFFFFF, 0x8000000000000001,	0x800000000000000F,	0x8000000000000010,	0x80000000000000FF,
		0x8000000000000100,	0x8000000000000FFF,	0x8000000000001000,	0x80000000000FFFFF,	0x8000000000100000,
		0x8000000000FFFFFF,	0x8000000001000000,	0x800000000FFFFFFF,	0x8000000010000000, 0x80000000FFFFFFFF,
		0x8000001000000000,	0x800000FFFFFFFFFF,	0x8000010000000000,	0x80000FFFFFFFFFFF,	0x8000100000000000,
		0x8000FFFFFFFFFFFF,	0x8001000000000000,	0x800FFFFFFFFFFFFF,	0x8010000000000000,	0x80FFFFFFFFFFFFFF,
		0x8100000000000000,	0x8FFFFFFFFFFFFFFF, 0xFFFFFFFFFFFFFFFF };

	UINT64 q[sizeof(ARRAY_SIZE(p))] = { 0 };

	for (INT32 i = 0;i < sizeof(ARRAY_SIZE(p));++i)
	{
		cs << p[i];
		cs >> q[i];

		CHECK_EQUAL(p[i] , q[i]); 
	} 
}  